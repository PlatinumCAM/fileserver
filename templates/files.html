<!doctype html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <title>Index — {{ rel_path or '/' }}</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
        body{font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:24px}
        h1{font-size:20px}
        table{border-collapse:collapse;width:100%;max-width:900px}
        td,th{padding:8px;border-bottom:1px solid #eee;text-align:left}
        a{color:#0645ad;text-decoration:none}
        .meta{color:#666;font-size:0.9em}
        .actions{white-space:nowrap}
    </style>
</head>
<body>
<h1>Contenu de : {{ rel_path or '/' }}</h1>
<p class="meta">Serveur racine : {{ root_path }}</p>
<table>
    <thead>
    <tr>
        <th>Nom</th>
        <th>Type</th>
        <th>Taille</th>
        <th class="actions">Actions</th>
    </tr>
    </thead>
    <tbody>
    {% if parent_link %}
    <tr>
        <td><a href="{{ parent_link }}">.. (Parent)</a></td>
        <td>Répertoire</td>
        <td></td>
        <td></td>
    </tr>
    {% endif %}
    {% for d in dirs %}
    <tr>
        <td><a href="{{ d.link }}">{{ d.name }}/</a></td>
        <td>Répertoire</td>
        <td class="meta">{{ d.count }} item(s)</td>
        <td class="actions"><a href="{{ d.zip_link }}">Télécharger .zip</a></td>
    </tr>
    {% endfor %}
    {% for f in files %}
    <tr>
        <td><a href="{{ f.link }}">{{ f.name }}</a></td>
        <td>Fichier</td>
        <td class="meta">{{ f.size }}</td>
        <td class="actions"><a href="{{ f.dl_link }}">Télécharger</a></td>
    </tr>
    {% endfor %}
    </tbody>
</table>
<hr>
<p class="meta">Connexion : HTTPS requise. URL affichée : <code>{{ request_url }}</code></p>
</body>
</html>